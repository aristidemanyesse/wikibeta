{% extends "layout/base.html" %} 
{% load myfilters %}
{% load footstats %}
{% load humanize %}
{% load static %}


{% block main  %}

<div class="container white-bg">
    <div class="row m-b-lg m-t-lg">
        <div class="row">
            <div class="col-md-5">
                <div class="row">
                    <div class="col-md-3">
                        
                    </div>
                    <div class="col-md-9 text-right">
                        <h1 class="bold">{{match.home}}</h1>
                        <h5 class="">{{match.home.team.pays.name}}</h5>
                        <div>
                           {% for x in match.home.get_last_form %}
                                <label class="label label-{{x|form_couleur}}">{{x}}</label>
                            {% endfor %}
                        </div>
                        <br>
                        <label class="label label-{{ match.get_home_before_stats.ppg | couleur }}">{{ match.get_home_before_stats.ppg }}</label>
                    </div>
                </div>
            </div>
            <div class="col-md-2 text-center">
                {% if match.is_finished %} 
                <h1 class="display-2 bold">{{match.home_score}} - {{match.away_score}}</h1>
                <h4 class="display-2">{{match.home_half_score}} - {{match.away_half_score}}</h4> 
                <h4 class="">{{match.date}}</h4> 
                {% else %}
                <h1 class="display-2">VS</h1>
                <h4 class="m-t-sm text-center">{{match.date}}</h4>        
                <h5 class="m-t-sm text-center">{{match.edition.competition}}</h5>  
                {% endif %}
            </div>
            <div class="col-md-5">
                <div class="row">
                    <div class="col-md-9 text-left">
                        <h1 class="bold">{{match.away}}</h1>
                        <h5 class="">{{match.away.team.pays.name}}</h5>
                        <div>
                            {% for x in match.away.get_last_form %}
                                <label class="label label-{{x|form_couleur}}">{{x}}</label>
                            {% endfor %}
                        </div>
                        <br>
                        <label class="label label-{{ match.get_away_before_stats.ppg | couleur }}">{{ match.get_away_before_stats.ppg }}</label>
                    </div>
                    <div class="col-md-3">
                        
                    </div>
                </div>
            </div>
        </div>
    </div>   

</div>



<div class="container">
    <div class="row  m-b-lg">
        {% for prediction in predictions %}
        <div class="col-md-3">
            <div class="ibox">
                <div class="ibox-content">
                    <h3 class="stat-percent no-margins">{{prediction.pct|rounded}}%</h3>
                    <h5>{{prediction.type.code}}</h5>
                    <div class="stat-percent font-bold text-navy">{{prediction.is_checked}}</div>
                    <small>{{prediction.mode}}</small>
                </div>
            </div>
        </div>
        {% endfor %}   
    </div>
</div>




<div class="container">
    <div class="row  m-t-lg">

        <div class="col-md-6">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>Les 7 derniers matchs de {{match.home}} <small class="m-l-sm">sur les PPG</small></h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                    </div>
                </div>
                <div class="ibox-content">
                    <table class="table table-striped table-hover">
                        <tbody>
                            {% for match in match.get_home_recents_matchs %}
                            <tr>
                                <td class="bold">{{match.date.day}}/{{match.date.month}}/{{match.date.year}}</td>
                                <td class="{% if match.home_score > match.away_score %}bold{% endif %} text-right"><a class="no-link" href="{% url 'fixtureApp:team' match.home %}">{{match.home}}</a></td>
                                <td class="text-right" width="10px"><label class="label label-{{ match.get_home_before_stats.ppg | couleur }}">{{ match.get_home_before_stats.ppg }}</label></td>
                                <td class="text-center">
                                    <h6 class="no-margins text-center">{{match.home_half_score}} - {{match.away_half_score}}</h6>
                                    <p class="no-margins text-center text-small">{{match.home_score}} - {{match.away_score}}</p>
                                </td>
                                <td class="text-left" width="10px"><label class="label label-{{ match.get_away_before_stats.ppg | couleur }}">{{ match.get_away_before_stats.ppg }}</label></td>
                                <td class="{% if match.home_score < match.away_score %}bold{% endif %} text-left"><a class="no-link" href="{% url 'fixtureApp:team' match.away %}">{{match.away}}</a></td>
                                <td><a href="{% url 'fixtureApp:match' match.id %}"><i class="fa fa-eye"></i> stats</a></td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>


        <div class="col-md-6">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>Les 7 derniers matchs de {{match.away}} <small class="m-l-sm">sur les buts</small></h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                    </div>
                </div>
                <div class="ibox-content">
                
                    <table class="table table-striped table-hover">
                        <tbody>
                            {% for match in match.get_away_recents_matchs %}
                                <tr>
                                    <td class="bold">{{match.date.day}}/{{match.date.month}}/{{match.date.year}}</td>
                                    <td class="{% if match.home_score > match.away_score %}bold{% endif %} text-right"><a class="no-link" href="{% url 'fixtureApp:team' match.home %}">{{match.home}}</a></td>
                                    <td class="text-right" width="10px"><label class="label label-{{ match.get_home_before_stats.ppg | couleur }}">{{ match.get_home_before_stats.ppg }}</label></td>
                                    <td class="text-center">
                                        <h6 class="no-margins text-center">{{match.home_half_score}} - {{match.away_half_score}}</h6>
                                        <p class="no-margins text-center text-small">{{match.home_score}} - {{match.away_score}}</p>
                                    </td>
                                    <td class="text-left" width="10px"><label class="label label-{{ match.get_away_before_stats.ppg | couleur }}">{{ match.get_away_before_stats.ppg }}</label></td>
                                    <td class="{% if match.home_score < match.away_score %}bold{% endif %} text-left"><a class="no-link" href="{% url 'fixtureApp:team' match.away %}">{{match.away}}</a></td>
                                    <td><a href="{% url 'fixtureApp:match' match.id %}"><i class="fa fa-eye"></i> stats</a></td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>
</div>


<div class="container m-t-lg">

    <div class="row m-b-lg ">
        <div class="col-md-8">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>Comparaison n'est pas raison <small class="m-l-sm">sur la forme du moment</small></h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                    </div>
                </div>
                <div class="ibox-content">
                 
                    <table class="table table-striped table-hover">
                        <tbody>
                            <tr>
                                <td class="bold text-right">{{match.home}}</td>
                                <td class="bold text-center">En confrontation</td>
                                <td class="bold text-left">{{match.away}}</td>
                            </tr>
                            <tr>
                                <td class="bold text-right">
                                    <label class="label label-{{ match.get_home_before_stats.ppg | couleur }}">{{ match.get_home_before_stats.ppg }}</label>
                                </td>
                                <td class="bold text-center">PPG</td>
                                <td class="bold text-left">
                                    <label class="label label-{{ match.get_away_before_stats.ppg | couleur }}">{{ match.get_away_before_stats.ppg }}</label>
                                </td>
                            </tr>
                            <tr>
                                 <td class="text-right">
                                    {% for x in match.get_home_last_form %}
                                    <label class="label label-{{x|form_couleur}}">{{x}}</label>
                                {% endfor %}
                                </td>
                                <td class="bold text-center">Forme du moment</td>
                                 <td class="text-left">
                                    {% for x in match.get_away_last_form %}
                                    <label class="label label-{{x|form_couleur}}">{{x}}</label>
                                {% endfor %}
                                </td>
                            </tr>
                            <tr>
                                <td class="bold text-right">{{ match.get_home_before_stats.avg_goals_scored }}</td>
                                <td class="bold text-center">Moyenne de buts marquées</td>
                                <td class="bold text-left">{{ match.get_away_before_stats.avg_goals_scored }}</td>
                                <td><img src=""></td>
                            </tr>
                            <tr>
                                <td class="bold text-right">{{ match.get_home_before_stats.avg_goals_conceded }}</td>
                                <td class="bold text-center">Moyenne de buts encaissés</td>
                                <td class="bold text-left">{{ match.get_away_before_stats.avg_goals_conceded }}</td>
                                <td><img src=""></td>
                            </tr>
                            <tr>
                                <td class="bold text-right">Team A</td>
                                <td class="bold text-center">Score attendu</td>
                                <td class="bold text-left">Team A</td>
                                <td><img src=""></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
      

        <div class="col-md-4">
            <div class="ibox">
                <div class="ibox-title">
                    <h5>Example of initial collapsed panel</h5>
                </div>
                <div class="ibox-content">
                    graph radar
                    <div class="row text-center">
                        <div class="col-sm-6">
                           <h1><b>2,85</b></h1>
                           <h4>buts marqués</h4>
                        </div>
                        <div class="col-sm-6">
                            <h4><b>2,85</b> <small>à la mi-temps</small></h4>
                            <hr>
                            <h4><b>2,85</b> <small>à la fin</small></h4>
                        </div>
                    </div> 
                </div>

                <div class="ibox-content">
                    <div class="row text-center">
                        <div class="col-sm-6">
                           <h1><b>2,85</b></h1>
                           <h4>buts concédés</h4>
                        </div>
                        <div class="col-sm-6">
                            <h4><b>2,85</b> <small>à la mi-temps</small></h4>
                            <hr>
                            <h4><b>2,85</b> <small>à la fin</small></h4>
                        </div>
                    </div> 
                </div>
            </div>
        </div>
    </div>


    <div class="row">
        <div class="col-md-5">
            <h4 class="bg-primary p-xs">Précédents matchs similaires</h4>

            <table class="table small m-b-xs">
                <tbody>
                    {% for match in confrontations %}
                    <tr>
                        <td class="bold">{{match.date.day}}/{{match.date.month}}/{{match.date.year}}</td>
                        <td class="{% if match.home_score > match.away_score %}bold{% endif %} text-right"><a class="no-link" href="{% url 'fixtureApp:team' match.home %}">{{match.home}}</a></td>
                        <td class="text-right" width="10px"><label class="label label-{{ match.get_home_before_stats.ppg | couleur }}">{{ match.get_home_before_stats.ppg }}</label></td>
                        <td class="text-center">
                            <h6 class="no-margins text-center">{{match.home_half_score}} - {{match.away_half_score}}</h6>
                            <p class="no-margins text-center text-small">{{match.home_score}} - {{match.away_score}}</p>
                        </td>
                        <td class="text-left" width="10px"><label class="label label-{{ match.get_away_before_stats.ppg | couleur }}">{{ match.get_away_before_stats.ppg }}</label></td>
                        <td class="{% if match.home_score < match.away_score %}bold{% endif %} text-left"><a class="no-link" href="{% url 'fixtureApp:team' match.away %}">{{match.away}}</a></td>
                        <td><a href="{% url 'fixtureApp:match' match.id %}"><i class="fa fa-eye"></i> stats</a></td>
                    </tr>
                {% endfor %}                    
                </tbody>
            </table>
        </div>


        <div class="col-md-7">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>Prédictions par Statistiques croisées <small class="m-l-sm">This is custom panel</small></h5>
                    <div class="ibox-tools">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            <i class="fa fa-cogs"></i>
                        </a>
                    </div>
                </div>
                <div class="ibox-content">
                 
                    <table class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th></th>
                                <th>Tous le match</th>
                                <th>1er MT</th>
                                <th>2e MT</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="">+0.5but</td>
                                <td class="{% if confrontations|plus_but:'0.5' >= 80 %}bold{% endif %}">{{ confrontations |plus_but:0.5 }}%</td>
                                <td class="{% if confrontations|plus_but_first_half:'0.5' >= 80 %}bold{% endif %}">{{ confrontations |plus_but_first_half:0.5 }}%</td>
                                <td class="{% if confrontations|plus_but_second_half:'0.5' >= 80 %}bold{% endif %}">{{ confrontations |plus_but_second_half:0.5 }}%</td>
                            </tr>
                            <tr>
                                <td class="">+1.5buts</td>
                                <td class="{% if confrontations|plus_but:1.5 >= 80 %}bold{% endif %}">{{ confrontations |plus_but:1.5 }}%</td>
                                <td class="{% if confrontations|plus_but_first_half:1.5 >= 80 %}bold{% endif %}">{{ confrontations |plus_but_first_half:1.5 }}%</td>
                                <td class="{% if confrontations|plus_but_second_half:1.5 >= 80 %}bold{% endif %}">{{ confrontations |plus_but_second_half:1.5 }}%</td>
                            </tr>
                            <tr>
                                <td class="">+2.5buts</td>
                                <td class="{% if confrontations|plus_but:2.5 >= 80 %}bold{% endif %}">{{ confrontations |plus_but:2.5 }}%</td>
                                <td class="{% if confrontations|plus_but_first_half:2.5 >= 80 %}bold{% endif %}">{{ confrontations |plus_but_first_half:2.5 }}%</td>
                                <td class="{% if confrontations|plus_but_second_half:2.5 >= 80 %}bold{% endif %}">{{ confrontations |plus_but_second_half:2.5 }}%</td>
                            </tr>
                            <tr>
                                <td class="">-2.5buts</td>
                                <td class="{% if confrontations|plus_but:2.5 >= 80 %}bold{% endif %}">{{ confrontations |plus_but:2.5 }}%</td>
                                <td class="{% if confrontations|moins_but_first_half:2.5 >= 80 %}bold{% endif %}">{{ confrontations |moins_but_first_half:2.5 }}%</td>
                                <td class="{% if confrontations|moins_but_second_half:2.5 >= 80 %}bold{% endif %}">{{ confrontations |moins_but_second_half:2.5 }}%</td>
                            </tr>
                            <tr>
                                <td class="">-3.5buts</td>
                                <td class="{% if confrontations|plus_but:3.5 >= 80 %}bold{% endif %}">{{ confrontations |plus_but:3.5 }}%</td>
                                <td class="{% if confrontations|moins_but_first_half:3.5 >= 80 %}bold{% endif %}">{{ confrontations |moins_but_first_half:3.5 }}%</td>
                                <td class="{% if confrontations|moins_but_second_half:3.5 >= 80 %}bold{% endif %}">{{ confrontations |moins_but_second_half:3.5 }}%</td>
                            </tr>
                            <tr>
                                <td class="">CS</td>
                                <td class="{% if confrontations|cs >= 80 %}bold{% endif %}">{{ confrontations |cs }}%</td>
                                <td class="{% if confrontations|first_half_cs >= 80 %}bold{% endif %}">{{ confrontations |first_half_cs }}%</td>
                                <td class="{% if confrontations|second_half_cs >= 80 %}bold{% endif %}">{{ confrontations |second_half_cs }}%</td>
                            </tr>
                            <tr>
                                <td class="">BTTS</td>
                                <td class="{% if confrontations|btts >= 80 %}bold{% endif %}">{{ confrontations |btts }}%</td>
                                <td class="{% if confrontations|first_half_btts >= 80 %}bold{% endif %}">{{ confrontations |first_half_btts }}%</td>
                                <td class="{% if confrontations|second_half_btts >= 80 %}bold{% endif %}">{{ confrontations |second_half_btts }}%</td>
                            </tr>
                            <tr>
                                <td class="">12</td>
                                <td class="{% if confrontations|_12 >= 80 %}bold{% endif %}">{{ confrontations |_12 }}%</td>
                                <td class="{% if confrontations|first_half_12 >= 80 %}bold{% endif %}">{{ confrontations |first_half_12 }}%</td>
                                <td class="{% if confrontations|second_half_12 >= 80 %}bold{% endif %}">{{ confrontations |second_half_12 }}%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

</div>

    

<style>
    .bold{
        font-weight:bold;
    }

    .no-link{
        color: inherit;
        text-decoration: none;
    }
</style>
{% endblock main %}